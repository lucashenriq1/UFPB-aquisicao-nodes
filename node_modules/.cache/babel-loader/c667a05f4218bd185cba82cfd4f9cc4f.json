{"ast":null,"code":"var generateStream = require('./lib/generateStream'),\n  parseStream = require('./lib/parseStream'),\n  Reduplexer = require('reduplexer'),\n  inherits = require('inherits'),\n  setImmediate = global.setImmediate;\nsetImmediate = setImmediate || function (func) {\n  process.nextTick(func);\n};\nfunction emitPacket(packet) {\n  this.emit(packet.cmd, packet);\n}\nfunction Connection(duplex, opts) {\n  if (!(this instanceof Connection)) {\n    return new Connection(duplex, opts);\n  }\n  opts = opts || {};\n  var inStream = generateStream(),\n    outStream = parseStream(opts);\n  duplex.pipe(outStream);\n  inStream.pipe(duplex);\n  this.stream = duplex;\n  duplex.on('error', this.emit.bind(this, 'error'));\n  duplex.on('close', this.emit.bind(this, 'close'));\n  Reduplexer.call(this, inStream, outStream, {\n    objectMode: true\n  });\n\n  // MQTT.js basic default\n  if (opts.notData !== true) this.on('data', emitPacket);\n}\ninherits(Connection, Reduplexer);\n['connect', 'connack', 'publish', 'puback', 'pubrec', 'pubrel', 'pubcomp', 'subscribe', 'suback', 'unsubscribe', 'unsuback', 'pingreq', 'pingresp', 'disconnect'].forEach(function (cmd) {\n  Connection.prototype[cmd] = function (opts, cb) {\n    opts = opts || {};\n    opts.cmd = cmd;\n\n    // flush the buffer if needed\n    // UGLY hack, we should listen for the 'drain' event\n    // and start writing again, but this works too\n    this.write(opts);\n    if (cb) setImmediate(cb);\n  };\n});\nConnection.prototype.destroy = function () {\n  if (this.stream.destroy) this.stream.destroy();else this.stream.end();\n};\nmodule.exports = Connection;\nmodule.exports.parseStream = parseStream;\nmodule.exports.generateStream = generateStream;","map":{"version":3,"names":["generateStream","require","parseStream","Reduplexer","inherits","setImmediate","global","func","process","nextTick","emitPacket","packet","emit","cmd","Connection","duplex","opts","inStream","outStream","pipe","stream","on","bind","call","objectMode","notData","forEach","prototype","cb","write","destroy","end","module","exports"],"sources":["D:/UFPB/aquisição/hb/aquisicao/node_modules/mqtt-connection/connection.js"],"sourcesContent":["\nvar generateStream  = require('./lib/generateStream')\n  , parseStream     = require('./lib/parseStream')\n  , Reduplexer      = require('reduplexer')\n  , inherits        = require('inherits')\n  , setImmediate    = global.setImmediate\n\nsetImmediate = setImmediate || function(func) {\n  process.nextTick(func);\n}\n\nfunction emitPacket(packet) {\n  this.emit(packet.cmd, packet)\n}\n\nfunction Connection(duplex, opts) {\n  if (!(this instanceof Connection)) {\n    return new Connection(duplex, opts)\n  }\n\n  opts = opts || {}\n\n  var inStream  = generateStream()\n    , outStream = parseStream(opts)\n\n  duplex.pipe(outStream)\n  inStream.pipe(duplex)\n\n  this.stream = duplex\n\n  duplex.on('error', this.emit.bind(this, 'error'))\n  duplex.on('close', this.emit.bind(this, 'close'))\n\n  Reduplexer.call(this, inStream, outStream, { objectMode: true })\n\n  // MQTT.js basic default\n  if (opts.notData !== true)\n    this.on('data', emitPacket)\n}\n\ninherits(Connection, Reduplexer)\n\n;['connect',\n  'connack',\n  'publish',\n  'puback',\n  'pubrec',\n  'pubrel',\n  'pubcomp',\n  'subscribe',\n  'suback',\n  'unsubscribe',\n  'unsuback',\n  'pingreq',\n  'pingresp',\n  'disconnect'].forEach(function(cmd) {\n    Connection.prototype[cmd] = function(opts, cb) {\n      opts = opts || {}\n      opts.cmd = cmd;\n\n      // flush the buffer if needed\n      // UGLY hack, we should listen for the 'drain' event\n      // and start writing again, but this works too\n      this.write(opts)\n      if (cb)\n        setImmediate(cb)\n    }\n  });\n\nConnection.prototype.destroy = function() {\n  if (this.stream.destroy)\n    this.stream.destroy()\n  else\n    this.stream.end()\n}\n\nmodule.exports = Connection\nmodule.exports.parseStream = parseStream\nmodule.exports.generateStream = generateStream\n"],"mappings":"AACA,IAAIA,cAAc,GAAIC,OAAO,CAAC,sBAAsB,CAAC;EACjDC,WAAW,GAAOD,OAAO,CAAC,mBAAmB,CAAC;EAC9CE,UAAU,GAAQF,OAAO,CAAC,YAAY,CAAC;EACvCG,QAAQ,GAAUH,OAAO,CAAC,UAAU,CAAC;EACrCI,YAAY,GAAMC,MAAM,CAACD,YAAY;AAEzCA,YAAY,GAAGA,YAAY,IAAI,UAASE,IAAI,EAAE;EAC5CC,OAAO,CAACC,QAAQ,CAACF,IAAI,CAAC;AACxB,CAAC;AAED,SAASG,UAAU,CAACC,MAAM,EAAE;EAC1B,IAAI,CAACC,IAAI,CAACD,MAAM,CAACE,GAAG,EAAEF,MAAM,CAAC;AAC/B;AAEA,SAASG,UAAU,CAACC,MAAM,EAAEC,IAAI,EAAE;EAChC,IAAI,EAAE,IAAI,YAAYF,UAAU,CAAC,EAAE;IACjC,OAAO,IAAIA,UAAU,CAACC,MAAM,EAAEC,IAAI,CAAC;EACrC;EAEAA,IAAI,GAAGA,IAAI,IAAI,CAAC,CAAC;EAEjB,IAAIC,QAAQ,GAAIjB,cAAc,EAAE;IAC5BkB,SAAS,GAAGhB,WAAW,CAACc,IAAI,CAAC;EAEjCD,MAAM,CAACI,IAAI,CAACD,SAAS,CAAC;EACtBD,QAAQ,CAACE,IAAI,CAACJ,MAAM,CAAC;EAErB,IAAI,CAACK,MAAM,GAAGL,MAAM;EAEpBA,MAAM,CAACM,EAAE,CAAC,OAAO,EAAE,IAAI,CAACT,IAAI,CAACU,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;EACjDP,MAAM,CAACM,EAAE,CAAC,OAAO,EAAE,IAAI,CAACT,IAAI,CAACU,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;EAEjDnB,UAAU,CAACoB,IAAI,CAAC,IAAI,EAAEN,QAAQ,EAAEC,SAAS,EAAE;IAAEM,UAAU,EAAE;EAAK,CAAC,CAAC;;EAEhE;EACA,IAAIR,IAAI,CAACS,OAAO,KAAK,IAAI,EACvB,IAAI,CAACJ,EAAE,CAAC,MAAM,EAAEX,UAAU,CAAC;AAC/B;AAEAN,QAAQ,CAACU,UAAU,EAAEX,UAAU,CAAC;AAE/B,CAAC,SAAS,EACT,SAAS,EACT,SAAS,EACT,QAAQ,EACR,QAAQ,EACR,QAAQ,EACR,SAAS,EACT,WAAW,EACX,QAAQ,EACR,aAAa,EACb,UAAU,EACV,SAAS,EACT,UAAU,EACV,YAAY,CAAC,CAACuB,OAAO,CAAC,UAASb,GAAG,EAAE;EAClCC,UAAU,CAACa,SAAS,CAACd,GAAG,CAAC,GAAG,UAASG,IAAI,EAAEY,EAAE,EAAE;IAC7CZ,IAAI,GAAGA,IAAI,IAAI,CAAC,CAAC;IACjBA,IAAI,CAACH,GAAG,GAAGA,GAAG;;IAEd;IACA;IACA;IACA,IAAI,CAACgB,KAAK,CAACb,IAAI,CAAC;IAChB,IAAIY,EAAE,EACJvB,YAAY,CAACuB,EAAE,CAAC;EACpB,CAAC;AACH,CAAC,CAAC;AAEJd,UAAU,CAACa,SAAS,CAACG,OAAO,GAAG,YAAW;EACxC,IAAI,IAAI,CAACV,MAAM,CAACU,OAAO,EACrB,IAAI,CAACV,MAAM,CAACU,OAAO,EAAE,MAErB,IAAI,CAACV,MAAM,CAACW,GAAG,EAAE;AACrB,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGnB,UAAU;AAC3BkB,MAAM,CAACC,OAAO,CAAC/B,WAAW,GAAGA,WAAW;AACxC8B,MAAM,CAACC,OAAO,CAACjC,cAAc,GAAGA,cAAc"},"metadata":{},"sourceType":"script"}